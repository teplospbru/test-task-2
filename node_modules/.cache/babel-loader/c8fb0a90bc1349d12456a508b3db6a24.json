{"ast":null,"code":"import axios from 'axios';\nimport { CALC_AMOUNT, CALC_CALCULATE_FROM, CALC_CALCULATE_TO, EXCHANGE_CALCULATE_FROM, GET_SUMMARY, HIDE_ALERT, HIDE_LOADER, RATES_FETCH, SHOW_ALERT, SHOW_LOADER, UPDATE_FROM_TO } from \"./types\";\nconst options = {\n  method: 'GET',\n  url: 'https://exchangerate-api.p.rapidapi.com/rapid/latest/USD',\n  headers: {\n    'X-RapidAPI-Host': 'exchangerate-api.p.rapidapi.com',\n    'X-RapidAPI-Key': '17ae393c6emshdd9cf9a325f83dbp1faa29jsnded4f4454e45'\n  }\n};\nexport function ratesFetch() {\n  return dispatch => {\n    dispatch({\n      type: SHOW_LOADER\n    });\n    axios.request(options).then(function (response) {\n      const date = new Date();\n      const currencies = ['USD', 'EUR', 'RUB', 'BYN', 'INR', 'CNY', 'TRY', 'GBP', 'CHF', 'JPY', 'THB'];\n      const lastUpdate = date.getDate() + '.' + (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '.' + date.getFullYear();\n      const fetchedCurrensies = currencies.map(currency => Object.entries(response.data.rates).filter(item => item[0] === currency));\n\n      for (let i = 0; i < fetchedCurrensies.length; i++) {\n        let temp = fetchedCurrensies[i][0];\n        fetchedCurrensies[i] = temp;\n      }\n\n      dispatch({\n        type: RATES_FETCH,\n        fetchedData: response.data,\n        lastUpdate,\n        currencies: fetchedCurrensies\n      });\n      setTimeout(() => {\n        dispatch({\n          type: HIDE_LOADER\n        });\n      }, 500);\n    }).catch(function (error) {\n      console.error(error);\n    });\n  };\n}\nexport function calculatorFrom(value, rate) {\n  return {\n    type: CALC_CALCULATE_FROM,\n    currency: value,\n    rate\n  };\n}\nexport function calculatorTo(value, rate) {\n  return {\n    type: CALC_CALCULATE_TO,\n    currency: value,\n    rate\n  };\n}\nexport function exchangeFrom(value) {\n  return {\n    type: EXCHANGE_CALCULATE_FROM,\n    currency: value\n  };\n}\nexport function calculatorAmount(value) {\n  return {\n    type: CALC_AMOUNT,\n    amount: value\n  };\n}\nexport function wrongInput() {\n  return dispatch => {\n    dispatch({\n      type: SHOW_ALERT\n    });\n    setTimeout(() => {\n      dispatch({\n        type: HIDE_ALERT\n      });\n    }, 1500);\n  };\n}\nexport function summary() {\n  return {\n    type: GET_SUMMARY\n  };\n}\nexport function updateFromTo() {\n  return {\n    type: UPDATE_FROM_TO\n  };\n}","map":{"version":3,"names":["axios","CALC_AMOUNT","CALC_CALCULATE_FROM","CALC_CALCULATE_TO","EXCHANGE_CALCULATE_FROM","GET_SUMMARY","HIDE_ALERT","HIDE_LOADER","RATES_FETCH","SHOW_ALERT","SHOW_LOADER","UPDATE_FROM_TO","options","method","url","headers","ratesFetch","dispatch","type","request","then","response","date","Date","currencies","lastUpdate","getDate","getMonth","getFullYear","fetchedCurrensies","map","currency","Object","entries","data","rates","filter","item","i","length","temp","fetchedData","setTimeout","catch","error","console","calculatorFrom","value","rate","calculatorTo","exchangeFrom","calculatorAmount","amount","wrongInput","summary","updateFromTo"],"sources":["/home/teplospb/Документы/Web-Dev/test-task-2/src/components/redux/actions.js"],"sourcesContent":["import axios from 'axios';\nimport { CALC_AMOUNT, CALC_CALCULATE_FROM, CALC_CALCULATE_TO, EXCHANGE_CALCULATE_FROM, GET_SUMMARY, HIDE_ALERT, HIDE_LOADER, RATES_FETCH, SHOW_ALERT, SHOW_LOADER, UPDATE_FROM_TO } from \"./types\";\n\nconst options = {\n  method: 'GET',\n  url: 'https://exchangerate-api.p.rapidapi.com/rapid/latest/USD',\n  headers: {\n    'X-RapidAPI-Host': 'exchangerate-api.p.rapidapi.com',\n    'X-RapidAPI-Key': '17ae393c6emshdd9cf9a325f83dbp1faa29jsnded4f4454e45'\n  }\n};\n\nexport function ratesFetch() {\n    return dispatch => {\n        dispatch({ type: SHOW_LOADER })\n        axios.request(options).then(function (response) {\n            const date = new Date();\n            const currencies = ['USD','EUR','RUB','BYN','INR','CNY','TRY','GBP','CHF','JPY','THB'];\n            const lastUpdate = date.getDate() + '.' + (((date.getMonth() + 1) < 10) ? '0' + (date.getMonth() + 1) : (date.getMonth() + 1)) + '.' + date.getFullYear();\n            const fetchedCurrensies = currencies.map(currency => Object.entries(response.data.rates).filter(item => item[0]=== currency));\n            for(let i = 0; i < fetchedCurrensies.length; i++) {\n              let temp = fetchedCurrensies[i][0];\n              fetchedCurrensies[i] = temp;\n            }\n            dispatch({ type: RATES_FETCH, fetchedData: response.data, lastUpdate, currencies: fetchedCurrensies });\n            setTimeout(() => {\n              dispatch({type: HIDE_LOADER });\n            }, 500)\n        }).catch(function (error) {\n            console.error(error);\n        });\n    }\n}\n\nexport function calculatorFrom(value, rate) {\n  return {\n    type: CALC_CALCULATE_FROM,\n    currency: value,\n    rate\n  }\n}\n\nexport function calculatorTo(value, rate) {\n  return {\n    type: CALC_CALCULATE_TO,\n    currency: value,\n    rate\n  }\n}\n\nexport function exchangeFrom(value) {\n  return {\n    type: EXCHANGE_CALCULATE_FROM,\n    currency: value\n  }\n}\n\nexport function calculatorAmount(value) {\n  return {\n    type: CALC_AMOUNT,\n    amount: value\n  }\n}\n\nexport function wrongInput() {\n  return dispatch => {\n    dispatch({ type: SHOW_ALERT });\n    setTimeout(() => {\n      dispatch({ type: HIDE_ALERT })\n    }, 1500)\n  }\n}\n\nexport function summary() {\n  return {\n    type: GET_SUMMARY,\n  }\n}\n\nexport function updateFromTo() {\n  return {\n    type: UPDATE_FROM_TO\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}