{"ast":null,"code":"import axios from'axios';import{CALC_AMOUNT,CALC_CALCULATE_FROM,CALC_CALCULATE_TO,EXCHANGE_CALCULATE_FROM,GET_SUMMARY,HIDE_ALERT,HIDE_LOADER,RATES_FETCH,SHOW_ALERT,SHOW_LOADER,UPDATE_FROM_TO}from\"./types\";var options={method:'GET',url:'https://exchangerate-api.p.rapidapi.com/rapid/latest/USD',headers:{'X-RapidAPI-Host':'exchangerate-api.p.rapidapi.com','X-RapidAPI-Key':'17ae393c6emshdd9cf9a325f83dbp1faa29jsnded4f4454e45'}};export function ratesFetch(){return function(dispatch){dispatch({type:SHOW_LOADER});axios.request(options).then(function(response){var date=new Date();var currencies=['USD','EUR','RUB','BYN','INR','CNY','TRY','GBP','CHF','JPY','THB'];var lastUpdate=date.getDate()+'.'+(date.getMonth()+1<10?'0'+(date.getMonth()+1):date.getMonth()+1)+'.'+date.getFullYear();var fetchedCurrensies=currencies.map(function(currency){return Object.entries(response.data.rates).filter(function(item){return item[0]===currency;});});for(var i=0;i<fetchedCurrensies.length;i++){var temp=fetchedCurrensies[i][0];fetchedCurrensies[i]=temp;}dispatch({type:RATES_FETCH,fetchedData:response.data,lastUpdate:lastUpdate,currencies:fetchedCurrensies});var fromRate=Object.entries(response.data.rates).filter(function(currency){return currency[0]==='USD';})[0][1];var toRate=Object.entries(response.data.rates).filter(function(currency){return currency[0]==='RUB';})[0][1];dispatch({type:UPDATE_FROM_TO,from:'USD',to:'RUB',fromRate:fromRate,toRate:toRate});setTimeout(function(){dispatch({type:HIDE_LOADER});},500);}).catch(function(error){console.error(error);});};}export function calculatorFrom(value,rate){return{type:CALC_CALCULATE_FROM,currency:value,rate:rate};}export function calculatorTo(value,rate){return{type:CALC_CALCULATE_TO,currency:value,rate:rate};}export function exchangeFrom(value){return{type:EXCHANGE_CALCULATE_FROM,currency:value};}export function calculatorAmount(value){return{type:CALC_AMOUNT,amount:value};}export function wrongInput(){return function(dispatch){dispatch({type:SHOW_ALERT});setTimeout(function(){dispatch({type:HIDE_ALERT});},1500);};}export function summary(){return{type:GET_SUMMARY};}// export function updateFromTo() {\n//   return {\n//     type: UPDATE_FROM_TO,\n//   }\n// }","map":{"version":3,"names":["axios","CALC_AMOUNT","CALC_CALCULATE_FROM","CALC_CALCULATE_TO","EXCHANGE_CALCULATE_FROM","GET_SUMMARY","HIDE_ALERT","HIDE_LOADER","RATES_FETCH","SHOW_ALERT","SHOW_LOADER","UPDATE_FROM_TO","options","method","url","headers","ratesFetch","dispatch","type","request","then","response","date","Date","currencies","lastUpdate","getDate","getMonth","getFullYear","fetchedCurrensies","map","currency","Object","entries","data","rates","filter","item","i","length","temp","fetchedData","fromRate","toRate","from","to","setTimeout","catch","error","console","calculatorFrom","value","rate","calculatorTo","exchangeFrom","calculatorAmount","amount","wrongInput","summary"],"sources":["/home/teplospb/Документы/Web-Dev/test-task-2/src/components/redux/actions.js"],"sourcesContent":["import axios from 'axios';\nimport { CALC_AMOUNT, CALC_CALCULATE_FROM, CALC_CALCULATE_TO, EXCHANGE_CALCULATE_FROM, GET_SUMMARY, HIDE_ALERT, HIDE_LOADER, RATES_FETCH, SHOW_ALERT, SHOW_LOADER, UPDATE_FROM_TO } from \"./types\";\n\nconst options = {\n  method: 'GET',\n  url: 'https://exchangerate-api.p.rapidapi.com/rapid/latest/USD',\n  headers: {\n    'X-RapidAPI-Host': 'exchangerate-api.p.rapidapi.com',\n    'X-RapidAPI-Key': '17ae393c6emshdd9cf9a325f83dbp1faa29jsnded4f4454e45'\n  }\n};\n\nexport function ratesFetch() {\n    return dispatch => {\n        dispatch({ type: SHOW_LOADER })\n        axios.request(options).then(function (response) {\n            const date = new Date();\n            const currencies = ['USD','EUR','RUB','BYN','INR','CNY','TRY','GBP','CHF','JPY','THB'];\n            const lastUpdate = date.getDate() + '.' + (((date.getMonth() + 1) < 10) ? '0' + (date.getMonth() + 1) : (date.getMonth() + 1)) + '.' + date.getFullYear();\n            const fetchedCurrensies = currencies.map(currency => Object.entries(response.data.rates).filter(item => item[0]=== currency));\n            for(let i = 0; i < fetchedCurrensies.length; i++) {\n              let temp = fetchedCurrensies[i][0];\n              fetchedCurrensies[i] = temp;\n            }\n            dispatch({ type: RATES_FETCH, fetchedData: response.data, lastUpdate, currencies: fetchedCurrensies });\n            const fromRate = Object.entries(response.data.rates).filter(currency => currency[0] === 'USD')[0][1];\n            const toRate = Object.entries(response.data.rates).filter(currency => currency[0] === 'RUB')[0][1];\n            dispatch({ type: UPDATE_FROM_TO, from: 'USD', to: 'RUB', fromRate, toRate })\n            setTimeout(() => {\n              dispatch({type: HIDE_LOADER });\n            }, 500)\n        }).catch(function (error) {\n            console.error(error);\n        });\n    }\n}\n\nexport function calculatorFrom(value, rate) {\n  return {\n    type: CALC_CALCULATE_FROM,\n    currency: value,\n    rate\n  }\n}\n\nexport function calculatorTo(value, rate) {\n  return {\n    type: CALC_CALCULATE_TO,\n    currency: value,\n    rate\n  }\n}\n\nexport function exchangeFrom(value) {\n  return {\n    type: EXCHANGE_CALCULATE_FROM,\n    currency: value\n  }\n}\n\nexport function calculatorAmount(value) {\n  return {\n    type: CALC_AMOUNT,\n    amount: value\n  }\n}\n\nexport function wrongInput() {\n  return dispatch => {\n    dispatch({ type: SHOW_ALERT });\n    setTimeout(() => {\n      dispatch({ type: HIDE_ALERT })\n    }, 1500)\n  }\n}\n\nexport function summary() {\n  return {\n    type: GET_SUMMARY,\n  }\n}\n\n// export function updateFromTo() {\n//   return {\n//     type: UPDATE_FROM_TO,\n//   }\n// }"],"mappings":"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"},"metadata":{},"sourceType":"module"}