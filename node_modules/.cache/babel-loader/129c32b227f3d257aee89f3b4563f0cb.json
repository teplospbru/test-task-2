{"ast":null,"code":"import axios from 'axios';\nimport { CALC_AMOUNT, CALC_CALCULATE_FROM, CALC_CALCULATE_TO, EXCHANGE_CALCULATE_FROM, HIDE_LOADER, RATES_FETCH, SHOW_LOADER } from \"./types\";\nconst options = {\n  method: 'GET',\n  url: 'https://exchangerate-api.p.rapidapi.com/rapid/latest/USD',\n  headers: {\n    'X-RapidAPI-Host': 'exchangerate-api.p.rapidapi.com',\n    'X-RapidAPI-Key': '17ae393c6emshdd9cf9a325f83dbp1faa29jsnded4f4454e45'\n  }\n};\nexport function ratesFetch() {\n  return dispatch => {\n    dispatch({\n      type: SHOW_LOADER\n    });\n    axios.request(options).then(function (response) {\n      const date = new Date();\n      const currencies = ['USD', 'EUR', 'RUB', 'BYN', 'INR', 'CNY', 'TRY', 'GBP', 'CHF', 'JPY', 'THB'];\n      const lastUpdate = date.getDate() + '.' + (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '.' + date.getFullYear();\n      const fetchedCurrensies = currencies.map(currency => Object.entries(response.data.rates).filter(item => item[0] === currency[0]));\n      fetchedCurrensies.forEach(item => item.flat());\n      console.log(response.data);\n      console.log(fetchedCurrensies);\n      dispatch({\n        type: RATES_FETCH,\n        fetchedData: response.data,\n        lastUpdate,\n        currencies: fetchedCurrensies\n      });\n      setTimeout(() => {\n        dispatch({\n          type: HIDE_LOADER\n        });\n      }, 500);\n    }).catch(function (error) {\n      console.error(error);\n    });\n  };\n}\nexport function calculatorFrom(value) {\n  return {\n    type: CALC_CALCULATE_FROM,\n    currency: value\n  };\n}\nexport function calculatorTo(value) {\n  return {\n    type: CALC_CALCULATE_TO,\n    currency: value\n  };\n}\nexport function exchangeFrom(value) {\n  return {\n    type: EXCHANGE_CALCULATE_FROM,\n    currency: value\n  };\n}\nexport function calculatorAmount(value) {\n  return {\n    type: CALC_AMOUNT,\n    amount: value\n  };\n}","map":{"version":3,"names":["axios","CALC_AMOUNT","CALC_CALCULATE_FROM","CALC_CALCULATE_TO","EXCHANGE_CALCULATE_FROM","HIDE_LOADER","RATES_FETCH","SHOW_LOADER","options","method","url","headers","ratesFetch","dispatch","type","request","then","response","date","Date","currencies","lastUpdate","getDate","getMonth","getFullYear","fetchedCurrensies","map","currency","Object","entries","data","rates","filter","item","forEach","flat","console","log","fetchedData","setTimeout","catch","error","calculatorFrom","value","calculatorTo","exchangeFrom","calculatorAmount","amount"],"sources":["/home/teplospb/Документы/Web-Dev/test-task-2/src/components/redux/actions.js"],"sourcesContent":["import axios from 'axios';\nimport { CALC_AMOUNT, CALC_CALCULATE_FROM, CALC_CALCULATE_TO, EXCHANGE_CALCULATE_FROM, HIDE_LOADER, RATES_FETCH, SHOW_LOADER } from \"./types\";\n\nconst options = {\n  method: 'GET',\n  url: 'https://exchangerate-api.p.rapidapi.com/rapid/latest/USD',\n  headers: {\n    'X-RapidAPI-Host': 'exchangerate-api.p.rapidapi.com',\n    'X-RapidAPI-Key': '17ae393c6emshdd9cf9a325f83dbp1faa29jsnded4f4454e45'\n  }\n};\n\nexport function ratesFetch() {\n    return dispatch => {\n        dispatch({ type: SHOW_LOADER })\n        axios.request(options).then(function (response) {\n            const date = new Date();\n            const currencies = ['USD','EUR','RUB','BYN','INR','CNY','TRY','GBP','CHF','JPY','THB'];\n            const lastUpdate = date.getDate() + '.' + (((date.getMonth() + 1) < 10) ? '0' + (date.getMonth() + 1) : (date.getMonth() + 1)) + '.' + date.getFullYear();\n            const fetchedCurrensies = currencies.map(currency => Object.entries(response.data.rates).filter(item => item[0]=== currency[0]));\n            fetchedCurrensies.forEach(item => item.flat());\n            console.log(response.data)\n            console.log(fetchedCurrensies)\n            dispatch({ type: RATES_FETCH, fetchedData: response.data, lastUpdate, currencies: fetchedCurrensies });\n            setTimeout(() => {\n              dispatch({type: HIDE_LOADER });\n            }, 500)\n        }).catch(function (error) {\n            console.error(error);\n        });\n    }\n}\n\nexport function calculatorFrom(value) {\n  return {\n    type: CALC_CALCULATE_FROM,\n    currency: value\n  }\n}\n\nexport function calculatorTo(value) {\n  return {\n    type: CALC_CALCULATE_TO,\n    currency: value\n  }\n}\n\nexport function exchangeFrom(value) {\n  return {\n    type: EXCHANGE_CALCULATE_FROM,\n    currency: value\n  }\n}\n\nexport function calculatorAmount(value) {\n  return {\n    type: CALC_AMOUNT,\n    amount: value\n  }\n}"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,EAAsBC,mBAAtB,EAA2CC,iBAA3C,EAA8DC,uBAA9D,EAAuFC,WAAvF,EAAoGC,WAApG,EAAiHC,WAAjH,QAAoI,SAApI;AAEA,MAAMC,OAAO,GAAG;EACdC,MAAM,EAAE,KADM;EAEdC,GAAG,EAAE,0DAFS;EAGdC,OAAO,EAAE;IACP,mBAAmB,iCADZ;IAEP,kBAAkB;EAFX;AAHK,CAAhB;AASA,OAAO,SAASC,UAAT,GAAsB;EACzB,OAAOC,QAAQ,IAAI;IACfA,QAAQ,CAAC;MAAEC,IAAI,EAAEP;IAAR,CAAD,CAAR;IACAP,KAAK,CAACe,OAAN,CAAcP,OAAd,EAAuBQ,IAAvB,CAA4B,UAAUC,QAAV,EAAoB;MAC5C,MAAMC,IAAI,GAAG,IAAIC,IAAJ,EAAb;MACA,MAAMC,UAAU,GAAG,CAAC,KAAD,EAAO,KAAP,EAAa,KAAb,EAAmB,KAAnB,EAAyB,KAAzB,EAA+B,KAA/B,EAAqC,KAArC,EAA2C,KAA3C,EAAiD,KAAjD,EAAuD,KAAvD,EAA6D,KAA7D,CAAnB;MACA,MAAMC,UAAU,GAAGH,IAAI,CAACI,OAAL,KAAiB,GAAjB,IAA0BJ,IAAI,CAACK,QAAL,KAAkB,CAAnB,GAAwB,EAAzB,GAA+B,OAAOL,IAAI,CAACK,QAAL,KAAkB,CAAzB,CAA/B,GAA8DL,IAAI,CAACK,QAAL,KAAkB,CAAxG,IAA8G,GAA9G,GAAoHL,IAAI,CAACM,WAAL,EAAvI;MACA,MAAMC,iBAAiB,GAAGL,UAAU,CAACM,GAAX,CAAeC,QAAQ,IAAIC,MAAM,CAACC,OAAP,CAAeZ,QAAQ,CAACa,IAAT,CAAcC,KAA7B,EAAoCC,MAApC,CAA2CC,IAAI,IAAIA,IAAI,CAAC,CAAD,CAAJ,KAAWN,QAAQ,CAAC,CAAD,CAAtE,CAA3B,CAA1B;MACAF,iBAAiB,CAACS,OAAlB,CAA0BD,IAAI,IAAIA,IAAI,CAACE,IAAL,EAAlC;MACAC,OAAO,CAACC,GAAR,CAAYpB,QAAQ,CAACa,IAArB;MACAM,OAAO,CAACC,GAAR,CAAYZ,iBAAZ;MACAZ,QAAQ,CAAC;QAAEC,IAAI,EAAER,WAAR;QAAqBgC,WAAW,EAAErB,QAAQ,CAACa,IAA3C;QAAiDT,UAAjD;QAA6DD,UAAU,EAAEK;MAAzE,CAAD,CAAR;MACAc,UAAU,CAAC,MAAM;QACf1B,QAAQ,CAAC;UAACC,IAAI,EAAET;QAAP,CAAD,CAAR;MACD,CAFS,EAEP,GAFO,CAAV;IAGH,CAZD,EAYGmC,KAZH,CAYS,UAAUC,KAAV,EAAiB;MACtBL,OAAO,CAACK,KAAR,CAAcA,KAAd;IACH,CAdD;EAeH,CAjBD;AAkBH;AAED,OAAO,SAASC,cAAT,CAAwBC,KAAxB,EAA+B;EACpC,OAAO;IACL7B,IAAI,EAAEZ,mBADD;IAELyB,QAAQ,EAAEgB;EAFL,CAAP;AAID;AAED,OAAO,SAASC,YAAT,CAAsBD,KAAtB,EAA6B;EAClC,OAAO;IACL7B,IAAI,EAAEX,iBADD;IAELwB,QAAQ,EAAEgB;EAFL,CAAP;AAID;AAED,OAAO,SAASE,YAAT,CAAsBF,KAAtB,EAA6B;EAClC,OAAO;IACL7B,IAAI,EAAEV,uBADD;IAELuB,QAAQ,EAAEgB;EAFL,CAAP;AAID;AAED,OAAO,SAASG,gBAAT,CAA0BH,KAA1B,EAAiC;EACtC,OAAO;IACL7B,IAAI,EAAEb,WADD;IAEL8C,MAAM,EAAEJ;EAFH,CAAP;AAID"},"metadata":{},"sourceType":"module"}