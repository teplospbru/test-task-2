{"ast":null,"code":"import axios from'axios';import{CALC_AMOUNT,CALC_CALCULATE_FROM,CALC_CALCULATE_TO,EXCHANGE_CALCULATE_FROM,GET_SUMMARY,HIDE_ALERT,HIDE_LOADER,RATES_FETCH,SHOW_ALERT,SHOW_LOADER}from\"./types\";var options={method:'GET',url:'https://exchangerate-api.p.rapidapi.com/rapid/latest/USD',headers:{'X-RapidAPI-Host':'exchangerate-api.p.rapidapi.com','X-RapidAPI-Key':'17ae393c6emshdd9cf9a325f83dbp1faa29jsnded4f4454e45'}};// Запрос к API\nexport function ratesFetch(){return function(dispatch){dispatch({type:SHOW_LOADER});axios.request(options).then(function(response){var currencies=['USD','EUR','RUB','BYN','INR','CNY','TRY','GBP','CHF','JPY','THB'];// Шаблон с нужными (используемыми) валютами\nvar date=new Date();// Здесь и на строчке ниже получаем дату последнего обновления\nvar lastUpdate=date.getDate()+'.'+(date.getMonth()+1<10?'0'+(date.getMonth()+1):date.getMonth()+1)+'.'+date.getFullYear();var fetchedCurrensies=currencies.map(function(currency){return Object.entries(response.data.rates).filter(function(item){return item[0]===currency;});});// получаем массив с нужными валютами\nfor(var i=0;i<fetchedCurrensies.length;i++){// убираем лишнюю вложенность\nvar temp=fetchedCurrensies[i][0];fetchedCurrensies[i]=temp;}dispatch({type:RATES_FETCH,fetchedData:response.data,lastUpdate:lastUpdate,currencies:fetchedCurrensies});// передаём массив с нужными валютами в соответствующие редьюсеры\nsetTimeout(function(){dispatch({type:HIDE_LOADER});},500);}).catch(function(error){console.error(error);});};}export function calculatorFrom(value){return{type:CALC_CALCULATE_FROM,currency:value};}export function calculatorTo(value){return{type:CALC_CALCULATE_TO,currency:value};}export function exchangeFrom(value){return{type:EXCHANGE_CALCULATE_FROM,currency:value};}export function calculatorAmount(value){return{type:CALC_AMOUNT,amount:value};}export function wrongInput(){return function(dispatch){dispatch({type:SHOW_ALERT});setTimeout(function(){dispatch({type:HIDE_ALERT});},1500);};}export function summary(){return{type:GET_SUMMARY};}","map":{"version":3,"names":["axios","CALC_AMOUNT","CALC_CALCULATE_FROM","CALC_CALCULATE_TO","EXCHANGE_CALCULATE_FROM","GET_SUMMARY","HIDE_ALERT","HIDE_LOADER","RATES_FETCH","SHOW_ALERT","SHOW_LOADER","options","method","url","headers","ratesFetch","dispatch","type","request","then","response","currencies","date","Date","lastUpdate","getDate","getMonth","getFullYear","fetchedCurrensies","map","currency","Object","entries","data","rates","filter","item","i","length","temp","fetchedData","setTimeout","catch","error","console","calculatorFrom","value","calculatorTo","exchangeFrom","calculatorAmount","amount","wrongInput","summary"],"sources":["/home/teplospb/Документы/Web-Dev/test-task-2/src/components/redux/actions.js"],"sourcesContent":["import axios from 'axios';\nimport { CALC_AMOUNT, CALC_CALCULATE_FROM, CALC_CALCULATE_TO, EXCHANGE_CALCULATE_FROM, GET_SUMMARY, HIDE_ALERT, HIDE_LOADER, RATES_FETCH, SHOW_ALERT, SHOW_LOADER } from \"./types\";\n\nconst options = {\n  method: 'GET',\n  url: 'https://exchangerate-api.p.rapidapi.com/rapid/latest/USD',\n  headers: {\n    'X-RapidAPI-Host': 'exchangerate-api.p.rapidapi.com',\n    'X-RapidAPI-Key': '17ae393c6emshdd9cf9a325f83dbp1faa29jsnded4f4454e45'\n  }\n};\n\n// Запрос к API\nexport function ratesFetch() {\n    return dispatch => {\n        dispatch({ type: SHOW_LOADER })\n        axios.request(options).then(function (response) {\n            const currencies = ['USD','EUR','RUB','BYN','INR','CNY','TRY','GBP','CHF','JPY','THB']; // Шаблон с нужными (используемыми) валютами\n            const date = new Date(); // Здесь и на строчке ниже получаем дату последнего обновления\n            const lastUpdate = date.getDate() + '.' + (((date.getMonth() + 1) < 10) ? '0' + (date.getMonth() + 1) : (date.getMonth() + 1)) + '.' + date.getFullYear();\n            const fetchedCurrensies = currencies.map(currency => Object.entries(response.data.rates).filter(item => item[0]=== currency)); // получаем массив с нужными валютами\n            for(let i = 0; i < fetchedCurrensies.length; i++) { // убираем лишнюю вложенность\n              let temp = fetchedCurrensies[i][0];\n              fetchedCurrensies[i] = temp;\n            }\n            dispatch({ type: RATES_FETCH, fetchedData: response.data, lastUpdate, currencies: fetchedCurrensies }); // передаём массив с нужными валютами в соответствующие редьюсеры\n            setTimeout(() => {\n              dispatch({type: HIDE_LOADER });\n            }, 500)\n        }).catch(function (error) {\n            console.error(error);\n        });\n    }\n}\n\nexport function calculatorFrom(value) {\n  return {\n    type: CALC_CALCULATE_FROM,\n    currency: value,\n  }\n}\n\nexport function calculatorTo(value) {\n  return {\n    type: CALC_CALCULATE_TO,\n    currency: value,\n  }\n}\n\nexport function exchangeFrom(value) {\n  return {\n    type: EXCHANGE_CALCULATE_FROM,\n    currency: value\n  }\n}\n\nexport function calculatorAmount(value) {\n  return {\n    type: CALC_AMOUNT,\n    amount: value\n  }\n}\n\nexport function wrongInput() {\n  return dispatch => {\n    dispatch({ type: SHOW_ALERT });\n    setTimeout(() => {\n      dispatch({ type: HIDE_ALERT })\n    }, 1500)\n  }\n}\n\nexport function summary() {\n  return {\n    type: GET_SUMMARY,\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}